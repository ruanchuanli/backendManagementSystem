(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab477"],{1530:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticStyle:{margin:"0 0 10px 0"}},[t._v("激活码管理-"+t._s(t.oneAppBiaoshi.appId))]),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(e){t.showAdd=!0,t.form={}}}},[t._v("新增激活码")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dataList,border:""}},[a("el-table-column",{attrs:{prop:"activeCode",label:"激活码"}}),a("el-table-column",{attrs:{prop:"bindNum",label:"绑定数量"}}),a("el-table-column",{attrs:{prop:"block",label:"拉黑状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"0"==e.row.block?"success":"danger"}},[t._v(" "+t._s(0==e.row.block?"未拉黑":"已拉黑")+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"480"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"danger"},on:{click:function(e){return t.delOp(n)}}},[t._v("删除")]),a("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.blackOp(n)}}},[t._v(" "+t._s("0"==n.block?"拉黑":"恢复")+" ")]),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.bindOp(n)}}},[t._v("设置绑定数量")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.appAccountDetail(n)}}},[t._v("客户端账号详情")])]}}])})],1),a("el-dialog",{attrs:{title:"新增激活码",visible:t.showAdd,width:"60%"},on:{"update:visible":function(e){t.showAdd=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"激活码",prop:"activeCode"}},[a("el-input",{attrs:{placeholder:"请输入激活码"},model:{value:t.form.activeCode,callback:function(e){t.$set(t.form,"activeCode",e)},expression:"form.activeCode"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"设置绑定数量",visible:t.showBindNum,width:"60%"},on:{"update:visible":function(e){t.showBindNum=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"激活码",prop:"activeCode"}},[a("el-input",{attrs:{readonly:""},model:{value:t.form.activeCode,callback:function(e){t.$set(t.form,"activeCode",e)},expression:"form.activeCode"}})],1),a("el-form-item",{attrs:{label:"绑定数量",prop:"bindNum"}},[a("el-input-number",{attrs:{placeholder:"请输入绑定数量"},model:{value:t.form.bindNum,callback:function(e){t.$set(t.form,"bindNum",e)},expression:"form.bindNum"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitBindNum}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.showBindNum=!1}}},[t._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"客户端账号详情-"+t.currentCode.activeCode,visible:t.showAccount,width:"60%"},on:{"update:visible":function(e){t.showAccount=e}}},[a("el-table",{attrs:{data:t.detailData,border:""}},[a("el-table-column",{attrs:{label:"头像",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-avatar",{attrs:{src:t.row.imageInfo}})]}}])}),a("el-table-column",{attrs:{prop:"nickname",label:"昵称"}}),a("el-table-column",{attrs:{prop:"createTime",label:"最近登录时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parseTime(e.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.deleteClientAccount(e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showAccount=!1}}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.showAccount=!1}}},[t._v("取 消")])],1)],1)],1)},r=[],o=a("c7eb"),c=a("1da1"),i=(a("99af"),a("b64b"),a("b775"));function s(t){return Object(i["a"])({url:"/crm/subAdmin/codeList",method:"get",params:t})}function l(t){return Object(i["a"])({url:"/crm/subAdmin/addCode",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/crm/subAdmin/delCode",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/crm/subAdmin/blackCode",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/crm/subAdmin/setNum",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/crm/subAdmin/clientList",method:"get",params:t})}var b={created:function(){this.oneAppBiaoshi=JSON.parse(localStorage.getItem("oneAppBiaoshi")),this.getDataList()},data:function(){return{currentCode:{},oneAppBiaoshi:{},dataList:[],form:{bindNum:"",activeCode:""},showAdd:!1,rules:{activeCode:[{required:!0,trigger:"blur",message:"请输入激活码"}]},loading:!1,showBindNum:!1,detailData:[],showAccount:!1}},methods:{deleteClientAccount:function(t){var e=this;return Object(c["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("确认删除该客户端账号?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:return a.next=4,delAppAccount({id:t.id});case 4:e.appAccountDetail(e.currentCode),e.$message.success("客户端账号删除成功");case 6:case"end":return a.stop()}}),a)})))()},appAccountDetail:function(t){var e=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.currentCode=t,e.showAccount=!0,a.prev=2,e.loading=!0,a.next=6,m({id:t.id});case 6:n=a.sent,e.detailData=n,e.loading=!1,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](2),e.loading=!1;case 14:case"end":return a.stop()}}),a,null,[[2,11]])})))()},getDataList:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,s({id:t.oneAppBiaoshi.id});case 4:a=e.sent,t.dataList=a,t.loading=!1,t.form={},e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.loading=!1;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},cancel:function(){this.showAdd=!1},submitBindNum:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.form.bindNum){e.next=3;break}return e.abrupt("return");case 3:return t.loading=!0,e.next=6,p({id:t.form.id,bindNum:t.form.bindNum});case 6:t.$message.success("设置成功"),t.getDataList(),t.loading=!1,t.showBindNum=!1,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),t.loading=!1;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},submitForm:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$refs.form.validate();case 3:return t.loading=!0,e.next=6,l({activeCode:t.form.activeCode,id:t.oneAppBiaoshi.id});case 6:e.sent,t.$message.sucess("添加成功"),t.getDataList(),t.loading=!1,t.form={},e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),t.loading=!1;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},bindOp:function(t){this.row=t,this.form=t,this.showBindNum=!0},delOp:function(t){var e=this;return Object(c["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$confirm("确定删除".concat(t.activeCode,"吗"));case 3:return a.next=5,u({id:t.id});case 5:e.$message.success("删除成功"),e.getDataList(),a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](0);case 11:case"end":return a.stop()}}),a,null,[[0,9]])})))()},blackOp:function(t){var e=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n="0"==t.block?"拉黑":"恢复",a.next=4,e.$confirm("确认".concat(n,"该").concat(t.activeCode,"激活码?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 4:return a.next=6,d({id:t.id,status:"0"==t.block?1:0});case 6:e.$message.success("操作成功"),e.getDataList(),a.next=12;break;case 10:a.prev=10,a.t0=a["catch"](0);case 12:case"end":return a.stop()}}),a,null,[[0,10]])})))()}},computed:{},watch:{},filters:{},components:{}},f=b,v=a("2877"),h=Object(v["a"])(f,n,r,!1,null,"eb2fbec6",null);e["default"]=h.exports}}]);
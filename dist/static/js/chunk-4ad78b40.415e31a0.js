(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ad78b40"],{"1f34":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){e.showAdd=!0}}},[e._v("新增用户")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:""}},[r("el-table-column",{attrs:{prop:"uid",label:"用户id"}}),r("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),r("el-table-column",{attrs:{prop:"role",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.role?"管理员":"子管理员")+" ")]}}])}),r("el-table-column",{attrs:{prop:"appNumber",label:"App标识"}}),r("el-table-column",{attrs:{label:"操作",width:"380"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.beforeUpdPwa(t.row)}}},[e._v("重置密码")]),r("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(r){return e.showAssignAppDialog(t.row)}}},[e._v("分配APP标识")]),0!=t.$index?r("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"danger"},on:{click:function(r){return e.delUser(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),r("el-dialog",{attrs:{title:"新增用户",visible:e.showAdd,width:"60%"},on:{"update:visible":function(t){e.showAdd=t}}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",{attrs:{label:"角色",prop:"role"}},[r("el-select",{model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},e._l(e.roles,(function(t){return r("el-option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.val))])})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),r("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),r("el-dialog",{attrs:{title:"重置密码",visible:e.showPwa,width:"60%"},on:{"update:visible":function(t){e.showPwa=t}}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("span",[e._v(e._s(e.currentUser.userName))])]),r("el-form-item",{attrs:{label:"新密码",prop:"newPwa"}},[r("el-input",{attrs:{placeholder:"请输入新密码","show-password":""},model:{value:e.newPwa,callback:function(t){e.newPwa=t},expression:"newPwa"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitEditPwa}},[e._v("确 定")]),r("el-button",{on:{click:function(t){e.showPwa=!1}}},[e._v("取 消")])],1)],1),r("el-dialog",{attrs:{title:"分配APP标识",visible:e.assignAppDialogVisible,width:"30%"},on:{"update:visible":function(t){e.assignAppDialogVisible=t}}},[r("el-form",{attrs:{model:e.assignAppForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("span",[e._v(e._s(e.currentUser.userName))])]),r("el-form-item",{attrs:{label:"APP标识"}},[r("el-select",{attrs:{placeholder:"请选择APP标识"},model:{value:e.assignAppForm.appNumber,callback:function(t){e.$set(e.assignAppForm,"appNumber",t)},expression:"assignAppForm.appNumber"}},e._l(e.appOptions,(function(e){return r("el-option",{key:e.appNumber,attrs:{label:e.name,value:e.appNumber}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.assignAppDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submitAssignApp}},[e._v("确 定")])],1)],1)],1)},s=[],n=r("c7eb"),o=r("1da1"),i=r("c0c7"),l=r("64b1"),c={created:function(){this.getUserList()},data:function(){return{assignAppDialogVisible:!1,dataList:[],roles:[{key:"0",val:"管理员"},{key:"1",val:"子管理员"}],form:{username:"",role:"",password:""},showAdd:!1,rules:{username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}],role:[{required:!0,trigger:"change",message:"请选择角色"}]},loading:!1,newPwa:"",showPwa:!1,assignAppForm:{appNumber:""},currentUser:{},appOptions:[]}},methods:{getAppOptions:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l["d"])();case 3:r=t.sent,e.appOptions=r,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},showAssignAppDialog:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function r(){return Object(n["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:try{t.currentUser=e,t.getAppOptions(),t.assignAppForm.appNumber=e.appNumber||"",t.assignAppDialogVisible=!0}catch(a){}case 1:case"end":return r.stop()}}),r)})))()},submitAssignApp:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.assignAppForm.appNumber){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Object(i["b"])({uid:e.currentUser.uid,appNumber:e.assignAppForm.appNumber});case 5:e.$message.success("APP标识分配成功"),e.getUserList(),e.assignAppDialogVisible=!1,t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})))()},getUserList:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,Object(i["g"])();case 4:r=t.sent,e.dataList=r,e.loading=!1,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},cancel:function(){this.showAdd=!1},submitEditPwa:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.newPwa){t.next=3;break}return t.abrupt("return");case 3:return e.loading=!0,t.next=6,Object(i["h"])({uid:e.currentUser.uid,password:e.newPwa});case 6:e.$message.success("修改成功"),e.loading=!1,e.showPwa=!1,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.loading=!1;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},submitForm:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:return e.loading=!0,t.next=6,Object(i["a"])(e.form);case 6:t.sent,e.getUserList(),e.showAdd=!1,e.$message.sucess("添加成功"),e.loading=!1,e.form={},t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),e.loading=!1;case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()},beforeUpdPwa:function(e){this.currentUser=e,this.showPwa=!0},delUser:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function r(){return Object(n["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$confirm("确定删除这个用户吗".concat(e.userName));case 3:return r.next=5,Object(i["c"])({uid:e.uid});case 5:t.$message.success("删除成功"),t.getUserList(),r.next=11;break;case 9:r.prev=9,r.t0=r["catch"](0);case 11:case"end":return r.stop()}}),r,null,[[0,9]])})))()}},computed:{},watch:{},filters:{},components:{}},u=c,p=r("2877"),d=Object(p["a"])(u,a,s,!1,null,"7536e46e",null);t["default"]=d.exports},"64b1":function(e,t,r){"use strict";r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return i}));var a=r("b775");function s(){return Object(a["a"])({url:"/crm/app/list",method:"get"})}function n(e){return Object(a["a"])({url:"/crm/app/add",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/crm/app/del",method:"post",data:e})}function i(){return Object(a["a"])({url:"/crm/app/selectList",method:"get"})}}}]);